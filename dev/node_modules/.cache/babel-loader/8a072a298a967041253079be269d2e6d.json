{"ast":null,"code":"import _slicedToArray from\"/Users/ccrm/Desktop/projects/chartjs/dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import ReactApexChart from\"react-apexcharts\";import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import SystemClosureTable from\"./SystemClosureTable\";var HeatMap=function HeatMap(props){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),closureSystems=_React$useState2[0],setClosureSystems=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),PAChecks=_React$useState4[0],setPAChecks=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),openModal=_React$useState6[0],setOpenModal=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),location=_React$useState8[0],setLocation=_React$useState8[1];var _React$useState9=React.useState(\"#4bb0ff\"),_React$useState10=_slicedToArray(_React$useState9,2),rangeColour=_React$useState10[0],setRangeColour=_React$useState10[1];var getData=function getData(systems){if(Array.isArray(systems)&&systems.length>0){var closure=systems[0][\"Closure Systems\"];var pachecks=systems[0][\"P&A Check Systems\"];if(props.activeQueryMethod===\"Closures\"){console.log(props.activeQueryMethod);return closure;}if(props.activeQueryMethod===\"P & A checks\"){return pachecks;}}else{return[];}};var dataOptionsClosures={chart:{toolbar:{show:false},events:{click:function click(event,chartContext,config){var el=event.target;var dataPointIndex=parseInt(el.getAttribute(\"j\"));var results=props.data.filter(function(item,i){return i===dataPointIndex;});var country=results.map(function(item){return item[\"Location code\"];});setClosureSystems(getData(results));setLocation(country);setOpenModal(true);},mouseMove:function mouseMove(event,chartContext,config){var el=event.target;var range=el.getAttribute(\"data:default-text\");console.log(range);if(range===\"0-1000\"){setRangeColour(\"#b30000\");}else{setRangeColour(\"#4bb0ff\");}}}},plotOptions:{heatmap:{radius:4,colorScale:{ranges:[{from:0,to:1000,color:rangeColour,name:\"0-1000\"},{from:1001,to:4000,color:\"#0063b0\",name:\"2001-4000\"},{from:4001,to:6000,color:\"#003863\",name:\"4001-6000\"}]}}},xaxis:{categories:props.data.map(function(_ref){var location=_ref[\"Location code\"];return location;})},dataLabels:{enabled:true},title:{text:'Method',margin:10,offsetX:40,offsetY:10,floating:true,style:{fontSize:'16px'}},colors:[\"#008FFB\"]};var dataSeriesClosures=[//   {\n//   name: \"Closures with script available\",\n//   data: props.data.map((item) => item[\"Closures with script available\"])\n// },\n{name:\"RPA Closures\",data:props.data.map(function(item){return item[\"RPA Closures\"];})},{name:\"Manual Closures\",data:props.data.map(function(item){return item[\"Manual Closures\"];})}];var dataOptionsPA={chart:{toolbar:{show:false},events:{click:function click(event,chartContext,config){var el=event.target;var dataPointIndex=parseInt(el.getAttribute(\"j\"));var results=props.data.filter(function(item,i){return i===dataPointIndex;});var country=results.map(function(item){return item[\"Location code\"];});setPAChecks(getData(results));setLocation(country);setOpenModal(true);}}},plotOptions:{heatmap:{radius:4,colorScale:{ranges:[{from:0,to:2000,color:\"#4bb0ff\",name:\"0 - 2000\"},{from:2001,to:4000,color:\"#0063b0\",name:\"2001 - 4000\"},{from:4001,to:6000,color:\"#003863\",name:\"4001 - 6000\"}]}}},xaxis:{categories:props.data.map(function(_ref2){var location=_ref2[\"Location code\"];return location;})},dataLabels:{enabled:true},title:{text:'Method',margin:10,offsetX:40,offsetY:10,floating:true,style:{fontSize:'16px'}},colors:[\"#008FFB\"]};var dataSeriesPA=[{name:\"RPA P&A Checks\",data:props.data.map(function(item){return item[\"RPA P&A Checks\"];})},// {\n//   name: \"P&A Checks with script available\",\n//   data: props.data.map((item) => item[\"P&A Checks with script available\"])\n// },\n{name:\"Manual P&A Checks\",data:props.data.map(function(item){return item[\"Manual P&A Checks\"];})}];var handleClose=function handleClose(){setOpenModal(false);};return/*#__PURE__*/React.createElement(\"div\",{style:{width:\"60%\",margin:\"auto\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"mixed-chart\",style:{margin:\"auto\"}},/*#__PURE__*/React.createElement(\"h1\",null,\"Offboarding Activities\"),/*#__PURE__*/React.createElement(Select,{style:{width:\"100px\",textAlign:\"center\",marginBottom:\"40px\",marginRight:\"20px\"},labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:props.activeQueryMethod,onChange:props.handleType},/*#__PURE__*/React.createElement(MenuItem,{value:\"Closures\"},\"Closures\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"P & A checks\"},\"P & A checks\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"All\"},\"All\")),/*#__PURE__*/React.createElement(Select,{style:{width:\"100px\",textAlign:\"center\",marginBottom:\"40px\",marginRight:\"20px\"},labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:props.activeQuery,onChange:props.handleChange},/*#__PURE__*/React.createElement(MenuItem,{value:\"Hubs\"},\"Hubs\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"EMEA Branches\"},\"EMEA Branches\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"APAC Branches\"},\"APAC Branches\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"AMER Branches\"},\"AMER Branches\")),/*#__PURE__*/React.createElement(\"h5\",null,\"Number of accounts\"),props.activeQueryMethod===\"Closures\"&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactApexChart,{options:dataOptionsClosures,series:dataSeriesClosures,type:\"heatmap\",height:\"300px\"}),/*#__PURE__*/React.createElement(SystemClosureTable,{handleClose:handleClose,open:openModal,region:location,closureData:closureSystems})),props.activeQueryMethod===\"P & A checks\"&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactApexChart,{options:dataOptionsPA,series:dataSeriesPA,type:\"heatmap\",height:\"300px\"}),/*#__PURE__*/React.createElement(SystemClosureTable,{handleClose:handleClose,open:openModal,region:location,paChecks:PAChecks})),props.activeQueryMethod===\"All\"&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactApexChart,{options:dataOptionsClosures,series:dataSeriesClosures,type:\"heatmap\",height:\"300px\"}),/*#__PURE__*/React.createElement(SystemClosureTable,{handleClose:handleClose,open:openModal,region:location,closureData:closureSystems}),/*#__PURE__*/React.createElement(\"p\",null,\"Country Code\"),/*#__PURE__*/React.createElement(ReactApexChart,{options:dataOptionsPA,series:dataSeriesPA,type:\"heatmap\",height:\"300px\"}),/*#__PURE__*/React.createElement(SystemClosureTable,{handleClose:handleClose,open:openModal,region:location,paChecks:PAChecks}),/*#__PURE__*/React.createElement(\"p\",null,\"Country Code\"))));};export default HeatMap;","map":{"version":3,"sources":["/Users/ccrm/Desktop/projects/chartjs/dev/src/components/clientProcesses/HeatMap.jsx"],"names":["React","ReactApexChart","Select","MenuItem","SystemClosureTable","HeatMap","props","useState","closureSystems","setClosureSystems","PAChecks","setPAChecks","openModal","setOpenModal","location","setLocation","rangeColour","setRangeColour","getData","systems","Array","isArray","length","closure","pachecks","activeQueryMethod","console","log","dataOptionsClosures","chart","toolbar","show","events","click","event","chartContext","config","el","target","dataPointIndex","parseInt","getAttribute","results","data","filter","item","i","country","map","mouseMove","range","plotOptions","heatmap","radius","colorScale","ranges","from","to","color","name","xaxis","categories","dataLabels","enabled","title","text","margin","offsetX","offsetY","floating","style","fontSize","colors","dataSeriesClosures","dataOptionsPA","dataSeriesPA","handleClose","width","textAlign","marginBottom","marginRight","handleType","activeQuery","handleChange"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactApexChart from \"react-apexcharts\";\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SystemClosureTable from \"./SystemClosureTable\"\nconst HeatMap = (props) => {\n  const [closureSystems, setClosureSystems] = React.useState([]);\n  const [PAChecks, setPAChecks] = React.useState([]);\n  const [openModal, setOpenModal] = React.useState(false);\n  const [location, setLocation] = React.useState([])\n  const [rangeColour, setRangeColour] = React.useState(\"#4bb0ff\")\n\n\n  const getData = (systems) => {\n\n    if (Array.isArray(systems) && systems.length > 0) {\n      const closure = systems[0][\"Closure Systems\"];\n      const pachecks = systems[0][\"P&A Check Systems\"]\n\n      if (props.activeQueryMethod === \"Closures\") {\n        console.log(props.activeQueryMethod)\n        return closure;\n      }\n      if (props.activeQueryMethod === \"P & A checks\") {\n\n        return pachecks;\n      }\n\n\n    } else {\n\n      return []\n    }\n\n  }\n\n  const dataOptionsClosures = {\n    chart: {\n      toolbar: {\n        show: false,\n      },\n      events: {\n        click: function (event, chartContext, config) {\n          let el = event.target;\n          let dataPointIndex = parseInt(el.getAttribute(\"j\"));\n\n          const results = props.data.filter((item, i) => i === dataPointIndex)\n          const country = results.map((item) => item[\"Location code\"])\n          setClosureSystems(getData(results))\n          setLocation(country)\n          setOpenModal(true)\n        },\n        mouseMove: (event, chartContext, config) => {\n          let el = event.target;\n          let range = el.getAttribute(\"data:default-text\");\n          console.log(range)\n          if (range === \"0-1000\") {\n            setRangeColour(\"#b30000\");\n          } else {\n            setRangeColour(\"#4bb0ff\")\n          }\n        }\n      }\n    },\n\n    plotOptions: {\n      heatmap: {\n        radius: 4,\n        colorScale: {\n          ranges: [{\n            from: 0,\n            to: 1000,\n            color: rangeColour,\n\n            name: \"0-1000\"\n          },\n          {\n            from: 1001,\n            to: 4000,\n            color: \"#0063b0\",\n            name: \"2001-4000\"\n          },\n          {\n            from: 4001,\n            to: 6000,\n            color: \"#003863\",\n            name: \"4001-6000\"\n          }]\n        }\n      }\n    },\n    xaxis: {\n      categories: props.data.map(({ [\"Location code\"]: location }) => location)\n    },\n    dataLabels: {\n      enabled: true,\n    },\n    title: {\n      text: 'Method',\n      margin: 10,\n      offsetX: 40,\n      offsetY: 10,\n      floating: true,\n      style: {\n        fontSize: '16px',\n\n      },\n\n    },\n\n    colors: [\"#008FFB\"],\n  };\n  const dataSeriesClosures = [\n    //   {\n    //   name: \"Closures with script available\",\n    //   data: props.data.map((item) => item[\"Closures with script available\"])\n    // },\n    {\n      name: \"RPA Closures\",\n      data: props.data.map((item) => item[\"RPA Closures\"])\n    },\n    {\n\n      name: \"Manual Closures\",\n      data: props.data.map((item) => item[\"Manual Closures\"])\n    }]\n\n  const dataOptionsPA = {\n    chart: {\n      toolbar: {\n        show: false,\n      },\n      events: {\n        click: function (event, chartContext, config) {\n          let el = event.target;\n\n          let dataPointIndex = parseInt(el.getAttribute(\"j\"));\n\n          const results = props.data.filter((item, i) => i === dataPointIndex)\n\n          const country = results.map((item) => item[\"Location code\"])\n          setPAChecks(getData(results))\n          setLocation(country)\n          setOpenModal(true)\n        }\n      }\n    },\n\n    plotOptions: {\n      heatmap: {\n        radius: 4,\n        colorScale: {\n          ranges: [{\n            from: 0,\n            to: 2000,\n            color: \"#4bb0ff\",\n            name: \"0 - 2000\"\n          },\n          {\n            from: 2001,\n            to: 4000,\n            color: \"#0063b0\",\n            name: \"2001 - 4000\"\n          },\n          {\n            from: 4001,\n            to: 6000,\n            color: \"#003863\",\n            name: \"4001 - 6000\"\n          }\n          ]\n        }\n\n      }\n    },\n    xaxis: {\n      categories: props.data.map(({ [\"Location code\"]: location }) => location)\n    },\n    dataLabels: {\n      enabled: true,\n\n    },\n    title: {\n      text: 'Method',\n      margin: 10,\n      offsetX: 40,\n      offsetY: 10,\n      floating: true,\n      style: {\n        fontSize: '16px',\n\n      },\n\n    },\n\n    colors: [\"#008FFB\"],\n  };\n  const dataSeriesPA = [{\n    name: \"RPA P&A Checks\",\n    data: props.data.map((item) => item[\"RPA P&A Checks\"])\n  },\n  // {\n  //   name: \"P&A Checks with script available\",\n  //   data: props.data.map((item) => item[\"P&A Checks with script available\"])\n  // },\n  {\n    name: \"Manual P&A Checks\",\n    data: props.data.map((item) => item[\"Manual P&A Checks\"])\n\n  }]\n  const handleClose = () => {\n    setOpenModal(false);\n  };\n  return (\n\n    <div style={{ width: \"60%\", margin: \"auto\" }} >\n\n      <div className=\"mixed-chart\" style={{ margin: \"auto\" }}>\n        <h1>Offboarding Activities</h1>\n        <Select\n          style={{ width: \"100px\", textAlign: \"center\", marginBottom: \"40px\", marginRight: \"20px\" }}\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={props.activeQueryMethod}\n          onChange={props.handleType}\n\n        >\n          <MenuItem value={\"Closures\"}>Closures</MenuItem>\n          <MenuItem value={\"P & A checks\"}>P & A checks</MenuItem>\n          <MenuItem value={\"All\"}>All</MenuItem>\n\n\n        </Select>\n        <Select\n          style={{ width: \"100px\", textAlign: \"center\", marginBottom: \"40px\", marginRight: \"20px\" }}\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={props.activeQuery}\n          onChange={props.handleChange}\n\n        >\n          <MenuItem value={\"Hubs\"}>Hubs</MenuItem>\n          <MenuItem value={\"EMEA Branches\"}>EMEA Branches</MenuItem>\n          <MenuItem value={\"APAC Branches\"}>APAC Branches</MenuItem>\n          <MenuItem value={\"AMER Branches\"}>AMER Branches</MenuItem>\n\n        </Select>\n\n        <h5>Number of accounts</h5>\n        {props.activeQueryMethod === \"Closures\" &&\n          <div>\n            <ReactApexChart\n              options={dataOptionsClosures}\n              series={dataSeriesClosures}\n              type=\"heatmap\"\n              height=\"300px\"\n\n            />\n            <SystemClosureTable\n              handleClose={handleClose}\n              open={openModal}\n              region={location}\n              closureData={closureSystems}>\n\n            </SystemClosureTable>\n          </div>\n        }\n\n        {props.activeQueryMethod === \"P & A checks\" &&\n          <div>\n            <ReactApexChart\n              options={dataOptionsPA}\n              series={dataSeriesPA}\n              type=\"heatmap\"\n              height=\"300px\"\n\n            />\n            <SystemClosureTable\n              handleClose={handleClose}\n              open={openModal}\n              region={location}\n              paChecks={PAChecks}>\n\n\n            </SystemClosureTable>\n          </div>\n        }\n\n        {props.activeQueryMethod === \"All\" &&\n          <div>\n            <ReactApexChart\n              options={dataOptionsClosures}\n              series={dataSeriesClosures}\n              type=\"heatmap\"\n              height=\"300px\"\n\n            />\n            <SystemClosureTable\n              handleClose={handleClose}\n              open={openModal}\n              region={location}\n              closureData={closureSystems}>\n\n            </SystemClosureTable>\n            <p>Country Code</p>\n\n            <ReactApexChart\n              options={dataOptionsPA}\n              series={dataSeriesPA}\n              type=\"heatmap\"\n              height=\"300px\"\n\n            />\n\n            <SystemClosureTable\n              handleClose={handleClose}\n              open={openModal}\n              region={location}\n              paChecks={PAChecks}>\n\n\n            </SystemClosureTable>\n            <p>Country Code</p>\n          </div>}\n\n\n\n      </div>\n    </div >\n\n  );\n}\n\n\nexport default HeatMap;"]},"metadata":{},"sourceType":"module"}